<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุชุนุฏูู ุงูุจูุงูุงุช</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
  <div class="navbar">
    <h1>ุชุนุฏูู ุจูุงูุงุช ุงููุณุชููุฏ</h1>
    <div class="nav-links">
      <li><a href="/" class="button">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a></li>
      <li><a href="/analysis" class="button">ุตูุญุฉ ุงูุชุญููู</a></li>
      <li><a href="/logout" class="button">ุชุณุฌูู ุงูุฎุฑูุฌ</a></li>
      <div class="notification-icon">
        <span>๐</span>
        <ul class="notification-dropdown">
          {% for notif in notifications %}
          <li>{{ notif.message }} - {{ notif.created_at }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>

  <form action="/edit/{{ record.national_id_1 }}" method="POST">
    <label>ุงูุงุณู ุฑุจุงุนู :</label>
    <input type="text" name="name_male" value="{{ record.name_male }}" required>

    <label>ุฑูู ุงููููุฉ:</label>
    <input type="text" name="national_id_1" value="{{ record.national_id_1 }}" required>

    <label>ุฑูู ุงูุฌูุงู:</label>
    <input type="text" name="phone_number" value="{{ record.phone_number }}" required>

    <label>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ:</label>
    <select name="marital_status" id="maritalStatus" onchange="handleMaritalStatus()" required>
      <option value="">ุงุฎุชุฑ ุงูุญุงูุฉ</option>
      <option value="ุฃุนุฒุจ" {% if record.marital_status == 'ุฃุนุฒุจ' %}selected{% endif %}>ุฃุนุฒุจ</option>
      <option value="ูุชุฒูุฌ" {% if record.marital_status == 'ูุชุฒูุฌ' %}selected{% endif %}>ูุชุฒูุฌ</option>
      <option value="ูุทูู" {% if record.marital_status == 'ูุทูู' %}selected{% endif %}>ูุทูู</option>
      <option value="ุฃุฑูู" {% if record.marital_status == 'ุฃุฑูู' %}selected{% endif %}>ุฃุฑูู</option>
    </select>

    <div id="wivesSection" style="display:none;">
      <label>ูู ุฒูุฌุฉุ</label>
      <select name="wives_count" id="wivesCount" onchange="handleWivesCount()">
        <option value="1" {% if record.wives_count == '1' %}selected{% endif %}>1</option>
        <option value="2" {% if record.wives_count == '2' %}selected{% endif %}>2</option>
        <option value="3" {% if record.wives_count == '3' %}selected{% endif %}>3</option>
        <option value="4" {% if record.wives_count == '4' %}selected{% endif %}>4</option>
      </select>

      <div id="wife1">
        <label>ุงุณู ุงูุฒูุฌุฉ 1:</label>
        <input type="text" name="name_female" value="{{ record.name_female }}">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 1:</label>
        <input type="text" name="national_id_2" value="{{ record.national_id_2 }}">
      </div>

      <div id="wife2" style="display:none;">
        <label>ุงุณู ุงูุฒูุฌุฉ 2:</label>
        <input type="text" name="wife2_name" value="{{ record.wife2_name }}">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 2:</label>
        <input type="text" name="wife2_national_id" value="{{ record.wife2_national_id }}">
      </div>

      <div id="wife3" style="display:none;">
        <label>ุงุณู ุงูุฒูุฌุฉ 3:</label>
        <input type="text" name="wife3_name" value="{{ record.wife3_name }}">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 3:</label>
        <input type="text" name="wife3_national_id" value="{{ record.wife3_national_id }}">
      </div>

      <div id="wife4" style="display:none;">
        <label>ุงุณู ุงูุฒูุฌุฉ 4:</label>
        <input type="text" name="wife4_name" value="{{ record.wife4_name }}">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 4:</label>
        <input type="text" name="wife4_national_id" value="{{ record.wife4_national_id }}">
      </div>
    </div>

    <label>ุนุฏุฏ ุฃูุฑุงุฏ ุงูุนุงุฆูุฉ:</label>
    <input type="number" name="family_members" value="{{ record.family_members }}" min="0" required>

    <label>ุนุฏุฏ ุงูุงูุฑุงุฏ ุงููุตุงุจูู:</label>
    <input type="number" name="family_members_injured" value="{{ record.family_members_injured }}" min="0" required>

    <label>ูู ูู ูุตุงุจุ</label>
    <select name="injured" required>
        <option value="ูุนู" {% if record.injured == 'ูุนู' %}selected{% endif %}>ูุนู</option>
        <option value="ูุง" {% if record.injured == 'ูุง' %}selected{% endif %}>ูุง</option>
    </select>

    <label>ุญุงูุฉ ุงูุถุฑุฑ:</label>
    <select name="damage_status" required>
        <option value="ููู" {% if record.damage_status == 'ููู' %}selected{% endif %}>ููู</option>
        <option value="ุฌุฒุฆู" {% if record.damage_status == 'ุฌุฒุฆู' %}selected{% endif %}>ุฌุฒุฆู</option>
        <option value="ุบูุฑ ูุชุถุฑุฑ" {% if record.damage_status == 'ุบูุฑ ูุชุถุฑุฑ' %}selected{% endif %}>ุบูุฑ ูุชุถุฑุฑ</option>
    </select>

    <label>ููุน ุงููุณุงุนุฏุฉ:</label>
    <select name="aid_type" id="aidType" required onchange="toggleAidFields()">
        <option value="">ุงุฎุชุฑ ููุน ุงููุณุงุนุฏุฉ</option>
        <option value="ูููุฉ ูุงููุฉ" {% if record.aid_type == 'ูููุฉ ูุงููุฉ' %}selected{% endif %}>ูููุฉ ูุงููุฉ</option>
        <option value="ุณูุฉ ุบุฐุงุฆูุฉ" {% if record.aid_type == 'ุณูุฉ ุบุฐุงุฆูุฉ' %}selected{% endif %}>ุณูุฉ ุบุฐุงุฆูุฉ</option>
        <option value="ุฏูุงุก" {% if record.aid_type == 'ุฏูุงุก' %}selected{% endif %}>ุฏูุงุก</option>
        <option value="ุจุทุงููุงุช" {% if record.aid_type == 'ุจุทุงููุงุช' %}selected{% endif %}>ุจุทุงููุงุช</option>
        <option value="ุงุฎุฑู" {% if record.aid_type == 'ุงุฎุฑู' %}selected{% endif %}>ุงุฎุฑู</option>
    </select>

    <div id="amountDiv" style="display:none;">
        <label>ูููุฉ ุงููุณุงุนุฏุฉ (ุดููู):</label>
        <input type="number" name="aid_amount" value="{{ record.aid_amount }}" min="0">
    </div>

    <div id="otherDiv" style="display:none;">
        <label>ููุน ุงููุณุงุนุฏุฉ (ุงุฎุฑู):</label>
        <input type="text" name="other_type_help" value="{{ record.other_type_help }}">
    </div>

    <label>ุงูููุทูุฉ:</label>
    <input type="text" name="area" value="{{ record.area }}" required>

    <label>ุฃูุฑุจ ูุนูู (ูุซุงู: ูุณุฌุฏุ ูุฏุฑุณุฉุ ุจูุงูุฉ...):</label>
    <input type="text" name="landmark" value="{{ record.landmark }}" required>

    <label>ุงูุฌูุณ:</label>
    <select name="gender" required>
      <option value="">ุงุฎุชุฑ</option>
      <option value="ุฐูุฑ" {% if record.gender == 'ุฐูุฑ' %}selected{% endif %}>ุฐูุฑ</option>
      <option value="ุฃูุซู" {% if record.gender == 'ุฃูุซู' %}selected{% endif %}>ุฃูุซู</option>
    </select>

    <label>ูููู/ูุงุฒุญ:</label>
<select name="Resident_displaced" required>
  <option value="ูููู" {% if record.Resident_displaced == 'ูููู' %}selected{% endif %}>ูููู</option>
  <option value="ูุงุฒุญ" {% if record.Resident_displaced == 'ูุงุฒุญ' %}selected{% endif %}>ูุงุฒุญ</option>
</select>

    <label>ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
    <textarea name="notes" rows="3">{{ record.notes }}</textarea>

    <button type="submit">ุชุนุฏูู</button>
  </form>

  <script>
    function toggleAidFields() {
        const aidType = document.getElementById("aidType").value;
        document.getElementById("amountDiv").style.display = aidType === "ูููุฉ ูุงููุฉ" ? "block" : "none";
        document.getElementById("otherDiv").style.display = aidType === "ุงุฎุฑู" ? "block" : "none";
    }

    function handleMaritalStatus() {
      const status = document.getElementById("maritalStatus").value;
      const wivesSection = document.getElementById("wivesSection");
      wivesSection.style.display = status === "ูุชุฒูุฌ" ? "block" : "none";
      handleWivesCount();
    }

    function handleWivesCount() {
      const count = parseInt(document.getElementById("wivesCount").value);
      for (let i = 1; i <= 4; i++) {
        document.getElementById("wife" + i).style.display = i <= count ? "block" : "none";
      }
    }

    // ุชูุนูู ุงูุญููู ุชููุงุฆููุง ุนูุฏ ุชุญููู ุงูุตูุญุฉ
    window.onload = function () {
      handleMaritalStatus();
      toggleAidFields();
    };
  </script>
</body>
</html>
