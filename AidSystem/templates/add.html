<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูููุฐุฌ ุงูุฅุฏุฎุงู</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
  <div class="navbar">
    <h1>ุณุฌู ุงููุณุงุนุฏุงุช</h1>
    <div class="nav-links">
      <li><a href="/" class="button">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a></li>
      <li><a href="/analytics" class="button">ุตูุญุฉ ุงูุชุญููู</a></li>
      <li><a href="/donate" class="button">ุชุณุฌูู ูุณุงุนุฏุฉ</a></li>
      <li><a href="/donations" class="button">ุนุฑุถ ุงููุชุจุฑุนูู</a></li>
      <li><a href="/logout" class="button">ุชุณุฌูู ุงูุฎุฑูุฌ</a></li>
      <div class="notification-icon">
        <span>๐</span>
        <ul class="notification-dropdown">
          {% for notif in notifications %}
          <li>{{ notif.message }} - {{ notif.created_at }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>

  <form action="/add" method="POST">
    <label>ุงูุงุณู ุฑุจุงุนู :</label>
    <input type="text" name="name_male" required>

    <label>ุฑูู ุงููููุฉ:</label>
    <input type="text" name="national_id_1" required pattern="\d{9}" title="ูุฌุจ ุฃู ูุชููู ุฑูู ุงููููุฉ ูู 9 ุฃุฑูุงู">

    <label>ุฑูู ุงูุฌูุงู:</label>
    <input type="text" name="phone_number" required pattern="05[69]\d{7}" title="ูุฌุจ ุฃู ูุจุฏุฃ ุฑูู ุงูุฌูุงู ุจู 059 ุฃู 056 ููุญุชูู ุนูู 10 ุฃุฑูุงู">

    <label>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ:</label>
    <select name="marital_status" id="maritalStatus" onchange="handleMaritalStatus()" required>
      <option value="">ุงุฎุชุฑ ุงูุญุงูุฉ</option>
      <option value="ุฃุนุฒุจ">ุฃุนุฒุจ</option>
      <option value="ูุชุฒูุฌ">ูุชุฒูุฌ</option>
      <option value="ูุทูู">ูุทูู</option>
      <option value="ุฃุฑูู">ุฃุฑูู</option>
    </select>

    <div id="wivesSection" style="display:none;">
      <label>ูู ุฒูุฌุฉุ</label>
      <select name="wives_count" id="wivesCount" onchange="handleWivesCount()">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>

      <div id="wife1">
        <label>ุงุณู ุงูุฒูุฌุฉ 1:</label>
        <input type="text" name="name_female">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 1:</label>
        <input type="text" name="national_id_2" pattern="\d{9}" title="ุฑูู ุงููููุฉ ูุฌุจ ุฃู ูุชููู ูู 9 ุฃุฑูุงู">
      </div>

      <div id="wife2" style="display:none;">
        <label>ุงุณู ุงูุฒูุฌุฉ 2:</label>
        <input type="text" name="wife2_name">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 2:</label>
        <input type="text" name="wife2_national_id" pattern="\d{9}" title="ุฑูู ุงููููุฉ ูุฌุจ ุฃู ูุชููู ูู 9 ุฃุฑูุงู">
      </div>

      <div id="wife3" style="display:none;">
        <label>ุงุณู ุงูุฒูุฌุฉ 3:</label>
        <input type="text" name="wife3_name">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 3:</label>
        <input type="text" name="wife3_national_id" pattern="\d{9}" title="ุฑูู ุงููููุฉ ูุฌุจ ุฃู ูุชููู ูู 9 ุฃุฑูุงู">
      </div>

      <div id="wife4" style="display:none;">
        <label>ุงุณู ุงูุฒูุฌุฉ 4:</label>
        <input type="text" name="wife4_name">
        <label>ุฑูู ูููุฉ ุงูุฒูุฌุฉ 4:</label>
        <input type="text" name="wife4_national_id" pattern="\d{9}" title="ุฑูู ุงููููุฉ ูุฌุจ ุฃู ูุชููู ูู 9 ุฃุฑูุงู">
      </div>
    </div>

    <label>ุนุฏุฏ ุฃูุฑุงุฏ ุงูุนุงุฆูุฉ:</label>
    <input type="number" name="family_members" min="1" required>

    <label>ุนุฏุฏ ุงูุงูุฑุงุฏ ุงููุตุงุจูู:</label>
    <input type="number" name="family_members_injured" id="injuredCount" min="0" required>

    <label>ูู ูู ูุตุงุจุ</label>
    <select name="injured" id="injuredSelect" required>
        <option value="ูุนู">ูุนู</option>
        <option value="ูุง">ูุง</option>
    </select>

    <label>ูููู / ูุงุฒุญ</label>
    <select name="Resident_displaced" required>
        <option value="ูููู">ูููู</option>
        <option value="ูุงุฒุญ">ูุงุฒุญ</option>
    </select>

    <label>ุญุงูุฉ ุงูุถุฑุฑ:</label>
    <select name="damage_status" required>
        <option value="ููู">ููู</option>
        <option value="ุฌุฒุฆู">ุฌุฒุฆู</option>
        <option value="ุบูุฑ ูุชุถุฑุฑ">ุบูุฑ ูุชุถุฑุฑ</option>
    </select>

    <label>ููุน ุงููุณุงุนุฏุฉ:</label>
    <select name="aid_type" id="aidType" required onchange="toggleAidFields()">
        <option value="">ุงุฎุชุฑ ููุน ุงููุณุงุนุฏุฉ</option>
        <option value="ูููุฉ ูุงููุฉ">ูููุฉ ูุงููุฉ</option>
        <option value="ุณูุฉ ุบุฐุงุฆูุฉ">ุณูุฉ ุบุฐุงุฆูุฉ</option>
        <option value="ุฏูุงุก">ุฏูุงุก</option>
        <option value="ุจุทุงููุงุช">ุจุทุงููุงุช</option>
        <option value="ุงุฎุฑู">ุงุฎุฑู</option>
    </select>

    <div id="amountDiv" style="display:none;">
        <label>ูููุฉ ุงููุณุงุนุฏุฉ (ุดููู):</label>
        <input type="number" name="aid_amount" min="0">
    </div>

    <div id="otherDiv" style="display:none;">
        <label>ููุน ุงููุณุงุนุฏุฉ (ุงุฎุฑู):</label>
        <input type="text" name="other_type_help">
    </div>

    <label>ุงูููุทูุฉ:</label>
    <input type="text" name="area" required>

    <label>ุฃูุฑุจ ูุนูู (ูุซุงู: ูุณุฌุฏุ ูุฏุฑุณุฉุ ุจูุงูุฉ...):</label>
    <input type="text" name="landmark" required>

    <label>ุงูุฌูุณ:</label>
    <select name="gender" required>
      <option value="">ุงุฎุชุฑ</option>
      <option value="ุฐูุฑ">ุฐูุฑ</option>
      <option value="ุฃูุซู">ุฃูุซู</option>
    </select>

    <label>ููุงุญุธุงุช (ุงุฎุชูุงุฑู):</label>
    <textarea name="notes" rows="3"></textarea>

    <button type="submit">ุฅุถุงูุฉ</button>
  </form>

  <script>
    function toggleAidFields() {
        const aidType = document.getElementById("aidType").value;
        document.getElementById("amountDiv").style.display = aidType === "ูููุฉ ูุงููุฉ" ? "block" : "none";
        document.getElementById("otherDiv").style.display = aidType === "ุงุฎุฑู" ? "block" : "none";
    }

    function handleMaritalStatus() {
      const status = document.getElementById("maritalStatus").value;
      const wivesSection = document.getElementById("wivesSection");

      if (status === "ูุชุฒูุฌ") {
        wivesSection.style.display = "block";
        handleWivesCount();
      } else {
        wivesSection.style.display = "none";
      }
    }

    function handleWivesCount() {
      const count = parseInt(document.getElementById("wivesCount").value);
      for (let i = 1; i <= 4; i++) {
        document.getElementById("wife" + i).style.display = i <= count ? "block" : "none";
      }
    }

    document.getElementById('injuredSelect').addEventListener('change', function () {
      const injuredValue = this.value;
      const injuredInput = document.getElementById('injuredCount');
      if (injuredValue === 'ูุนู') {
        injuredInput.min = 1;
        if (injuredInput.value < 1) injuredInput.value = 1;
      } else {
        injuredInput.min = 0;
        injuredInput.value = 0;
      }
    });
  </script>
</body>
</html>
